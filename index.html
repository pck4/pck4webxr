<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <title>Quest3 AR 벽돌깨기</title>
    <!-- A-Frame 라이브러리 -->
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <!-- aframe-physics-system (Cannon.js 기반 물리 엔진) -->
    <script src="https://cdn.jsdelivr.net/npm/aframe-physics-system@4.0.1/dist/aframe-physics-system.min.js"></script>
    <!-- 커스텀 JS -->
    <script src="js/main_quest3.js"></script>
    <style>
      body { margin: 0; padding: 0; overflow: hidden; }
    </style>
  </head>
  <body>
    <!-- immersive-ar 모드, local-floor 참조, 패스스루 AR 구현 -->
    <a-scene 
      xr="mode: 'immersive-ar'; referenceSpaceType: 'local-floor';" 
      physics="gravity: 0 0 0" 
      embedded 
      renderer="logarithmicDepthBuffer: true;" 
      vr-mode-ui="enabled: false">
      
      <!-- 게임 전체를 감싸는 루트 엔티티: 바닥(hit test) 인식 -->
      <a-entity id="game-root" floor-detector>
      
        <!-- 발판(Paddle): static-body, 컨트롤러 입력으로 움직임 -->
        <a-box id="player-bar"
          paddle-controller
          static-body
          position="0 0.2 -3"
          width="1.2" height="0.2" depth="0.2"
          color="#4CC3D9">
        </a-box>
        
        <!-- 공(Ball): dynamic-body로 물리 효과 적용, 초기 발사 -->
        <a-sphere id="ball"
          dynamic-body="mass: 1; shape: sphere; restitution: 1.0;"
          ball-collision
          ball-launcher
          position="0 0.5 -3"
          radius="0.1"
          color="#EF2D5E">
        </a-sphere>
        
        <!-- 벽돌들(Bricks): static-body -->
        <a-box class="brick" static-body position="-1 1.8 -3" width="0.4" height="0.2" depth="0.2" color="#FFC65D"></a-box>
        <a-box class="brick" static-body position="0 1.8 -3"  width="0.4" height="0.2" depth="0.2" color="#7BC8A4"></a-box>
        <a-box class="brick" static-body position="1 1.8 -3"  width="0.4" height="0.2" depth="0.2" color="#FFC65D"></a-box>
      
      </a-entity>
      
      <!-- 카메라: AR 환경에서 헤드셋 뷰 반영 -->
      <a-camera position="0 1.6 0"></a-camera>
      
      <!-- 오른손 컨트롤러: laser-controls로 모델링 -->
      <a-entity id="right-controller" laser-controls="hand: right"></a-entity>
      
    </a-scene>
  </body>
</html>
